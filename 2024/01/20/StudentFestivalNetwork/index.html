<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="browsermode" content="application">
<meta name="apple-touch-fullscreen" content="yes">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-title" content="Ajax's Blog">
<meta name="apple-mobile-web-app-status-bar-style" content="default">
<meta name="msapplication-navbutton-color" content="#666666">
<meta name= "format-detection" content="telephone=no" />

  <link rel="apple-touch-icon"  sizes="72x72"  href="/favicon.ico">
  <link rel="apple-touch-icon-precomposed"  sizes="72x72"  href="/favicon.ico">






<link rel="apple-touch-startup-image" media="(device-width: 375px)" href="assets/apple-launch-1125x2436.png">
<link rel="apple-touch-startup-image" media="(orientation: landscape)" href="assets/apple-touch-startup-image-2048x1496.png">

<link rel="stylesheet" href="/style/style.css">

<script>
  var nlviconfig = {
    title: "Ajax's Blog",
    author: "Ajax Dong",
    baseUrl: "/",
    theme: {
      scheme: "banderole",
      lightbox: true,
      animate: true,
      search: true,
      friends: false,
      reward: false,
      pjax: true,
      lazy: false,
      toc: true
    }
  }
</script>




    
<link rel="stylesheet" href="/script/lib/lightbox/css/lightbox.min.css">





    
<link rel="stylesheet" href="/syuanpi/syuanpi.min.css">





    <link rel="icon" href="/favicon.ico">




    <link rel="alternate" type="application/rss+xml" href="/atom.xml" />









<style>
@font-face {
  font-family: "Allura";
  src: url('/font/allura/allura.ttf');
}
</style>

  <title> Network on Ninetune - A Quick Guide · Ajax's Blog </title>
<meta name="generator" content="Hexo 7.2.0"></head>
<body>
  <div class="container">
    <header class="header" id="header">
  <div class="header-wrapper">
    <div class="logo">
  <div class="logo-inner syuanpi tvIn" style="display:none;">
    <h1><a href="/">Ajax's Blog</a></h1>
    
  </div>
</div>

    <nav class="main-nav">
  
  <ul class="main-nav-list syuanpi tvIn">
  
    <li class="menu-item">
      <a href="javascript:;" id="search-btn" aria-label="Search">
        <i class="iconfont icon-search"></i>
      </a>
    </li>
  
  
  
    
  
    <li class="menu-item">
      <a href="/" id="article">
        <span class="base-name">
          
            ARTICLE
          
        </span>
      </a>
    </li>
  
  
    
  
    <li class="menu-item">
      <a href="/archives" id="archives">
        <span class="base-name">
          
            ARCHIVES
          
        </span>
      </a>
    </li>
  
  
    
  
    <li class="menu-item">
      <a href="javascript:;" id="tags">
        <span class="base-name">
          
            TAGS
          
        </span>
      </a>
    </li>
  
  
    
  
    <li class="menu-item">
      <a href="/about" id="about">
        <span class="base-name">
          
            ABOUT
          
        </span>
      </a>
    </li>
  
  
    
  
    <li class="menu-item">
      <a href="/atom.xml" id="rss">
        <span class="base-name">
          
            RSS
          
        </span>
      </a>
    </li>
  
  
  </ul>
  
</nav>

  </div>
</header>
<div class="mobile-header" id="mobile-header">
  <div class="mobile-header-nav">
    <div class="mobile-header-item" id="mobile-left">
      <div class="header-menu-item">
        <div class="header-menu-line"></div>
      </div>
    </div>
    <h1 class="mobile-header-title">
      <a href="/">Ajax's Blog</a>
    </h1>
    <div class="mobile-header-item"></div>
  </div>
  <div class="mobile-header-body">
    <ul class="mobile-header-list">
      
        <li class="mobile-nav-item syuanpi fadeInRightShort back-0">
          <a href="/" >
            
              ARTICLE
            
          </a>
        </li>
      
        <li class="mobile-nav-item syuanpi fadeInRightShort back-1">
          <a href="/archives" >
            
              ARCHIVES
            
          </a>
        </li>
      
        <li class="mobile-nav-item syuanpi fadeInRightShort back-2">
          <a href="javascript:;" id="mobile-tags">
            
              TAGS
            
          </a>
        </li>
      
        <li class="mobile-nav-item syuanpi fadeInRightShort back-3">
          <a href="/about" >
            
              ABOUT
            
          </a>
        </li>
      
        <li class="mobile-nav-item syuanpi fadeInRightShort back-4">
          <a href="/atom.xml" >
            
              RSS
            
          </a>
        </li>
      
    </ul>
  </div>
</div>



    <div class="container-inner" style="display:none;">
      <main class="main" id="main">
        <div class="main-wrapper">
          
    
  
  <article class="
  post
   is_post 
  ">
    <header class="post-header">
      <div class="post-time syuanpi fadeInRightShort back-1">
        <div class="post-time-wrapper">
          
          <time>2024-01-20</time>
          
        </div>
      </div>
      <h1 class="post-title syuanpi fadeInRightShort back-2">
        
          Network on Ninetune - A Quick Guide
        
      </h1>
    </header>
    <div class="post-content syuanpi fadeInRightShort back-3">
      
        <p>之前的几届用的都是学长留下来的方案. 我接手这个事情之后看了看学长的方案, 感觉有一些美中不足之处. 因此, 我在十一假期闲的没事的时候重做了一版路由方案, 在学生节前重做了一版 WiFi 方案, 在 ChaGPT 之前更新了一版方案.</p>
<p>这篇文章将尝试 (啊对, 我也说不准大家能不能看懂) 阐明, Ninetune 的网络是如何运作的.</p>
<span id="more"></span>

<h2 id="前置知识"><a href="#前置知识" class="headerlink" title="前置知识"></a>前置知识</h2><p>由于咱还没上网原, 所以这些知识大家不上网原也一定能看懂罢 (x</p>
<p>同样由于咱还没上网原, 很多东西讲的不一定对, 意思理解就行 (x</p>
<h3 id="NAT-Network-Address-Translation"><a href="#NAT-Network-Address-Translation" class="headerlink" title="NAT (Network Address Translation)"></a>NAT (Network Address Translation)</h3><p>IPv4 地址是不够用的, 连接校园网也只能获取到 1 个 v4 地址. 底下有那么多设备要访问网络, 怎么办呢? 只有借助 NAT 技术. 我们用到的主要是 SNAT (源地址转换), 在向外请求的时候把内网地址转换为公网地址 (或者说, 上一级的地址), 维护这个流的状态信息, 使得相应的回包能够被正确转发给请求的设备.</p>
<p>学校只给一个 &#x2F;128 的 IPv6 地址, 所以 v6 网也得 NAT.</p>
<h3 id="VLAN"><a href="#VLAN" class="headerlink" title="VLAN"></a>VLAN</h3><p>有时候一根网线上希望走多个互不干扰的数据. VLAN 把一根网线分成若干根虚拟的网线, 同一个 VLAN 相当于互相连接的一张网.</p>
<h2 id="网络架构"><a href="#网络架构" class="headerlink" title="网络架构"></a>网络架构</h2><p>现在你已经知道这些前置知识了, 来看看活动网络的架构吧!</p>
<p>![活动网络架构](&#x2F;2024&#x2F;01&#x2F;20&#x2F;StudentFestivalNetwork&#x2F;Activity Network.png)</p>
<p>活动网的架构其实很简单. 有一个 NUC 充当路由器, 两台交换机互相连接, 下面挂着 8 个 AP (就是发射无线信号的东西). 是不是简单易懂啊 (x</p>
<p>接下来魔法要开始啦~</p>
<p>作为活动网络, 自然有一些特殊的需求. </p>
<p>比如, 我们登录的账号是某位 <em>好心</em> 同学的账号. 如果有人在活动现场攻击学校的网, 导致被封号了怎么办? (bushi) 肯定有人要说, “除了你, 谁还干得出这种事情啊”, 但是既然我都能干出这种事情那肯定会有别人这样干对不对 (bushi). 因此, 我们可能需要针对学校网做一些防护.</p>
<p>再比如, 在 Ninetune 的前一个小时左右, 如果你打开 login.tsinghua.edu.cn, 就会看到上面写着登录的咱的校园网账号, 还有一个叫做 “断开连接” 的按钮. 你按一下, <strong>BOOM</strong>!!! 学生节的弹幕下线了, 直播中断了, 所有人都没网了… 这种事情还是要避免的对不对.</p>
<p>再比如, 如果有人用学生节的网下载原神, 占用了大量的资源, 会不会导致直播出现卡顿? 因此, 我们需要给直播保障至少 50Mibps 的带宽……</p>
<p>因此, 经过一分钟的综合考量, 我划分了以下 VLAN:</p>
<ul>
<li>VLAN 10, Management. 192.168.0.0&#x2F;24, 用于管理交换机和 AP</li>
<li>VLAN 2, User, 192.168.32.0&#x2F;21, 用于给用户上网</li>
<li>VLAN 3, Faculty, 192.168.64.0&#x2F;24, 用于承载弹幕, 直播等后台业务</li>
</ul>
<h2 id="路由配置"><a href="#路由配置" class="headerlink" title="路由配置"></a>路由配置</h2><p>整个网络的路由是在 NUC 上面的一台 Debian 虚拟机上进行的.</p>
<h3 id="转发"><a href="#转发" class="headerlink" title="转发"></a>转发</h3><p>作为路由器, 最基础的功能至少要能把数据包转发出去. Linux 的 <strong>默认行为</strong> 是会 <em>吃掉</em> 所有与它无关的数据包. 为了满足路由的需要, 就要把IPv4, IPv6 的转发统统打开. 这样路由器才有最基础的交换功能.</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">net.ipv4.ip_forward=1</span><br><span class="line">net.ipv6.conf.all.forwarding=1</span><br><span class="line">net.ipv6.conf.all.accept_source_route=1</span><br><span class="line">net.ipv6.conf.all.accept_redirects=1</span><br></pre></td></tr></table></figure>

<h3 id="网口"><a href="#网口" class="headerlink" title="网口"></a>网口</h3><p>然后就是网口的配置了. NUC 正好有两个物理接口, 一个接校园网一个接活动网刚刚好.</p>
<h4 id="上行"><a href="#上行" class="headerlink" title="上行"></a>上行</h4><p>首先看接校园网的网口吧. 校园网 (有线) 的 IPv4 和 v6 地址都是 DHCP 分配的, 网口上相当于一个 DHCP Client. IPv4 的接口配置相当简单, 一行就完事了:</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iface eth0 inet dhcp</span><br></pre></td></tr></table></figure>

<p>IPv6 的就复杂一些. ICMPv6 规定了 Router Announcement 报文用于通知数据包如何转发. 但由于 IPv6 <em>转发是开启的</em>, 为了防止自己的 IPv6 路由被绑架, 必须显式设置 <code>accept_ra=2</code>, 使得 Linux 接受学校的路由器给的路由. 而且, 由于 DHCP Client 的一些 Bug, 如果 IPv6 的子网变化很大 (比如我宿舍的宽带是 <code>240e:</code> 打头, 校园网是 <code>2402:</code> 打头), 那么 DHCP Server 不会回复 NAK 信息 (而是直接丢弃), 此时 Client 只会继续发 Confirmation, 不发送 Discover 消息, 多次 Confirmation 失败之后就停了. 所以有时候需要手动强制重新获取 IPv6 地址. (感觉讲的不甚清楚).</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">iface eth0 inet6 dhcp</span><br><span class="line">    accept_ra 2</span><br><span class="line"></span><br><span class="line">    # 下面两行用来解决 ifdown 的时候 ipv6 地址依然保留导致获取不到新地址的问题</span><br><span class="line">    post-up dhclient -6 eth0 -v</span><br><span class="line">    pre-down dhclient -6 -r eth0 -v</span><br></pre></td></tr></table></figure>

<h4 id="下行"><a href="#下行" class="headerlink" title="下行"></a>下行</h4><p>往下走就比较麻烦了. 首先是 VLAN 的问题. 要把一个接口拆分成多个 VLAN 虚拟接口. 比如下面一行定义了 eth1 上 VLAN 10 的接口:</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">auto eth1.10</span><br></pre></td></tr></table></figure>

<p>然后是 IPv4 的地址设置, 使用静态 IP, 没有默认网关 (自己就是网关):</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">iface eth1.10 inet static</span><br><span class="line">    address 192.168.0.1</span><br><span class="line">    netmask 255.255.255.0</span><br></pre></td></tr></table></figure>

<p>然后是 IPv6:</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">iface eth1.10 inet6 static</span><br><span class="line">    address fd30:5341:5354:0::1</span><br><span class="line">    netmask 64</span><br></pre></td></tr></table></figure>

<p>以此类推定义三个 VLAN 的接口, 这部分就算完成了.</p>
<h3 id="DHCPD"><a href="#DHCPD" class="headerlink" title="DHCPD"></a>DHCPD</h3><p>如果到此为止, 那么你的手机电脑连上 WiFi 是没办法获取 IP 的, 需要手动设置. 因此对于 v4 网, 我们需要配置 DHCP Daemon (Server) 来使得设备能够自动获取到 IP 地址. (就像我们获取家里 WiFi 的 IPv4 一样)</p>
<p>我使用的 Server 是 <code>isc-dhcp-server</code>. 先告诉 ta 要为哪些网卡进行监听:</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">INTERFACESv4=&quot;eth1.10 eth1.2 eth1.3&quot;</span><br></pre></td></tr></table></figure>

<p>然后依次告诉 ta 要怎么处理出现在这些网段上的请求, ta 会自动将每一个网段匹配到对应的网卡上:</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">subnet 192.168.0.0 netmask 255.255.255.0 &#123;</span><br><span class="line">    # Address range that can be used as DHCP address</span><br><span class="line">    range 192.168.0.100 192.168.0.254;</span><br><span class="line">    # Broadcast address (can be calculated given subnet and netmask)</span><br><span class="line">    option broadcast-address 192.168.0.255;</span><br><span class="line">    # Default router</span><br><span class="line">    option routers 192.168.0.1;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这时候, 你的设备就能正常获取 IPv4 内网地址, 在内网之间互相通信啦~</p>
<h3 id="RADVD"><a href="#RADVD" class="headerlink" title="RADVD"></a>RADVD</h3><p>你问我 IPv6 呢? 与 v4 不一样, IPv6 支持另一种地址分配方式 – SLAAC, 并且路由是由 RA 决定的. 手机仅支持 SLAAC (不支持 DHCPv6), 所以 SLAAC 是唯一可行的方式.</p>
<p>SLAAC 具体怎么回事自己查, 大致就是给一个 <strong>&#x2F;64</strong> 的前缀, 由设备基于自己的 MAC ADDR 决定一个地址, 然后向局域网通告.</p>
<p>对于每一个子网, 开启 RA, 设置通告的前缀, 并说明这个前缀上面的设备 都是局域网设备 (On Link), 可以使用 SLAAC 自行决定地址 (Autonomous), 以本机作为路由 (Router Address):</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">interface eth1.10</span><br><span class="line">&#123;</span><br><span class="line">    AdvSendAdvert on;</span><br><span class="line">    MinRtrAdvInterval 30;</span><br><span class="line">    MaxRtrAdvInterval 100;</span><br><span class="line">    prefix fd30:5341:5354:0000::/64</span><br><span class="line">    &#123;</span><br><span class="line">        AdvOnLink on;</span><br><span class="line">        AdvAutonomous on;</span><br><span class="line">        AdvRouterAddr on;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>这样一来, 设备就能获取到 IPv6 <strong>ULA</strong> 地址并能在局域网内通信啦~</p>
<h3 id="NAT"><a href="#NAT" class="headerlink" title="NAT"></a>NAT</h3><p>于是就有人问了, 搞了这么半天, 还访问不了公网? 还真是. 不过也快了.</p>
<p>思考: 当底下的设备 ping 114.114.114.114 的时候会怎样?</p>
<p>路由器转发给学校的路由器: <code>192.168.32.2 ping 114.114.114.114</code></p>
<p>学校的路由器一看, <code>192.168</code> 开头是什么玩意? 扔了扔了. 于是, 不通.</p>
<p>怎么办呢? 用 NAT, <code>166.111.x.x ping 114.114.114.114</code>. 知道啦, <code>114.114.114.114 reply 166.111.x.x</code>, 然后路由器再把目的地址换回去, <code>114.114.114.114 reply 192.168.32.2</code>, 这就终于通了. 要实现很简单:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">iptables -A POSTROUTING -o eth0 -j MASQUERADE</span><br><span class="line">ip6tables -A POSTROUTING -o eth0 -j MASQUERADE</span><br></pre></td></tr></table></figure>

<p>这下终于能访问公网喽~</p>
<h3 id="安全配置"><a href="#安全配置" class="headerlink" title="安全配置"></a>安全配置</h3><p>你问, 这就完了嘛? 当然没有. 前面提到了很多安全有关的问题, 需要一一解决. 这些我就不展开了 (主要是很多规则现在还在虚拟机里面没有拿出来, 懒得自己手写一遍了)</p>
<ul>
<li>禁止 User 段成员互相访问, 禁止 User 段成员访问 Management 段, Faculty 段. 这是三层基础的权限控制.</li>
<li>禁止 Faculty 段成员访问 Management 段</li>
<li>禁止外面乱发 DHCP 应答, 仅允许 Router 发 DHCP 应答</li>
<li>禁止外面乱发 RA</li>
<li>禁止外面乱发 ARP</li>
<li>二层隔离</li>
<li>禁止 User 段成员访问 login.tsinghua.edu.cn, auth4, auth6</li>
<li>SSH 端口不对 User 和 Faculty 开放</li>
<li>STP 防环</li>
<li>单端口防环</li>
<li>……</li>
</ul>
<p>正是这些高级安全策略使得网络不会因为一颗老鼠屎全面崩溃, 造成混乱.</p>
<h3 id="流量控制"><a href="#流量控制" class="headerlink" title="流量控制"></a>流量控制</h3><p>这还不够. 为了保障直播等工作正常进行, 我还写了一点流量控制策略, 参考 <a target="_blank" rel="noopener" href="https://arthurchiao.art/blog/lartc-qdisc-zh/">大佬的译作</a></p>
<ul>
<li>保证 50Mibps 带宽给 Faculty 使用</li>
<li>保证 10Mibps 带宽给 Management 使用</li>
<li>剩下的带宽公平地分配给每一个连接</li>
</ul>
<h3 id="VPN-配置"><a href="#VPN-配置" class="headerlink" title="VPN 配置"></a>VPN 配置</h3><p>为了方便管理, 我给路由器配置了一个点对点的 VPN (啊对, 真的是 VPN 不是那个).</p>
<h2 id="无线配置"><a href="#无线配置" class="headerlink" title="无线配置"></a>无线配置</h2><p>说了这么多, 你发现了什么? WiFi 信号还没发出来呢……</p>
<p>AP 的布置也是有讲究的. 首先要了解单个 AP 的信号强度情况 (这两张图片好大!):</p>
<p><img src="/2024/01/20/StudentFestivalNetwork/2F%20Single%20AP.png" alt="2 楼单个 AP"></p>
<p><img src="/2024/01/20/StudentFestivalNetwork/1F%20Single%20AP.png" alt="1 楼单个 AP"></p>
<p>可以看到 AP 的覆盖范围还是很大的, 信号也不错. 因此, 我们不妨给出这样的布局:</p>
<p><img src="/2024/01/20/StudentFestivalNetwork/1F%20APs.png" alt="1F AP"></p>
<p>由于本人很懒, AP 的信道和功率直接丢给自动调整, 最后效果也还不错.</p>
<h2 id="结语"><a href="#结语" class="headerlink" title="结语"></a>结语</h2><p>至此, 一位没有学过网原的大二同学配置好了学生节的网. 学生节上用户数大概 150 左右, 流量从未达到需要 tc 介入的水平. 这套改进的方案相较于旧方案改进了网络结构, 取消了单个设备的速率上限, 最大化利用了网络. 也希望这篇文章连通咱在飞书里面的文档能使得这套系统易于维护, 不断更新.</p>
<link rel="stylesheet" href="/css/folder.css" type="text/css"><script src="/js/folder.js" type="text/javascript" async></script>
      
    
    </div>
    
    
      

      
  <hr class="copy-line">
  <div class="post-copyright">
    <div class="copy-author">
      <span>Author :</span>
      <span>Ajax Dong</span>
    </div>
    <div class="copy-url">
      <span>Url :</span>
      <a href="https://aajax.top/2024/01/20/StudentFestivalNetwork/">https://aajax.top/2024/01/20/StudentFestivalNetwork/</a>
    </div>
    <div class="copy-origin">
      <span>Origin :</span>
      <a href="https://aajax.top">https://aajax.top</a>
    </div>
    <div class="copy-license">
      
      著作权归作者所有，转载请联系作者获得授权。
    </div>
  </div>

    
  </article>
  
    
  <nav class="article-page">
    
      <a href="/2024/01/20/UpgradingGitlab/" id="art-left" class="art-left">
        <span class="next-title">
          <i class="iconfont icon-left"></i>Upgrading Gitlab and Configuring OAuth2 Generic
        </span>
      </a>
    
    
      <a href="/2024/01/19/MyFirstPost/" id="art-right" class="art-right">
        <span class="prev-title">
          Hello world! & Summary of Autumn Semester 2023<i class="iconfont icon-right"></i>
        </span>
      </a>
    
  </nav>


    
  <i id="com-switch" class="iconfont icon-down jumping-in long infinite" style="font-size:24px;display:block;text-align:center;transform:rotate(180deg);"></i>
  <div class="post-comments" id="post-comments" style="display: block;margin: auto 16px;">
    

    
    

    

  </div>



  
  
    
  
  <aside class="post-toc">
    <div class="title"><span>Index</span></div>
    <div class="toc-inner">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%89%8D%E7%BD%AE%E7%9F%A5%E8%AF%86"><span class="toc-text">前置知识</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#NAT-Network-Address-Translation"><span class="toc-text">NAT (Network Address Translation)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#VLAN"><span class="toc-text">VLAN</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E6%9E%B6%E6%9E%84"><span class="toc-text">网络架构</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%B7%AF%E7%94%B1%E9%85%8D%E7%BD%AE"><span class="toc-text">路由配置</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BD%AC%E5%8F%91"><span class="toc-text">转发</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BD%91%E5%8F%A3"><span class="toc-text">网口</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%8A%E8%A1%8C"><span class="toc-text">上行</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%8B%E8%A1%8C"><span class="toc-text">下行</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#DHCPD"><span class="toc-text">DHCPD</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#RADVD"><span class="toc-text">RADVD</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#NAT"><span class="toc-text">NAT</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E5%85%A8%E9%85%8D%E7%BD%AE"><span class="toc-text">安全配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B5%81%E9%87%8F%E6%8E%A7%E5%88%B6"><span class="toc-text">流量控制</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#VPN-%E9%85%8D%E7%BD%AE"><span class="toc-text">VPN 配置</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%97%A0%E7%BA%BF%E9%85%8D%E7%BD%AE"><span class="toc-text">无线配置</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%93%E8%AF%AD"><span class="toc-text">结语</span></a></li></ol>
    </div>
  </aside>



  


        </div>
      </main>
      <footer class="footer syuanpi fadeIn" id="footer">
  <hr>
  <div class="footer-wrapper">
    <div class="left">
      <div class="contact-icon">
  
  
    <a target="_blank" rel="noopener" href="https://github.com/84634E1A607A" class="iconfont icon-github" title="github"></a>
  
</div>

    </div>
    <div class="right">
      <div class="copyright">
    <div class="info">
        <span>&copy;</span>
        <span>2024 ~ 2024</span>
        <span>❤</span>
        <span>Ajax Dong</span>
    </div>
    <div class="theme">
        <span>
            Powered by
            <a href="http://hexo.io/" target="_blank" rel="noopener">Hexo </a>
        </span>
        <span>
            Theme
            <a target="_blank" rel="noopener" href="https://github.com/ColMugX/hexo-theme-Nlvi"> Nlvi </a>
        </span>
    </div>
    
</div>

    </div>
  </div>
</footer>
    </div>
    <div class="tagcloud" id="tagcloud">
  <div class="tagcloud-taglist">
  
  </div>
  
</div>

  </div>
  <div class="backtop syuanpi melt toTop" id="backtop">
    <i class="iconfont icon-up"></i>
    <span style="text-align:center;font-family:Georgia;"><span style="font-family:Georgia;" id="scrollpercent">1</span>%</span>
</div>

  <div class="search" id="search">
    <div class="input">
      <input type="text" id="search-input" placeholder="Search something?" autofocus>
    </div>
    <div id="search-result"></div>
  </div>



<script src="https://cdn.jsdelivr.net/npm/jquery@3.4.1/dist/jquery.min.js"></script>



  <script></script>
  <script src="/script/lib/lightbox/js/lightbox.min.js" async></script>





  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script>
    MathJax = {
      tex: {
        tags: 'ams'
      }
    };
  </script>
  <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>





  
<script src="/script/lib/pjax/pjax.js"></script>




  
<script src="/script/scheme/banderole.js"></script>




<script src="/script/bootstarp.js"></script>



<script>
if (nlviconfig.theme.toc) {
  setTimeout(function() {
    if (nlviconfig.theme.scheme === 'balance') {
      $("#header").addClass("show_toc");
    } else if (nlviconfig.theme.scheme === 'banderole') {
      $(".container-inner").addClass("has_toc");
      $(".post-toc .title").addClass("show");
      $(".toc-inner").addClass("show");
    }
  }, 1000);
}
</script>



</body>
</html>
